.. _de_module:
.. include:: <isoamsa.txt>
.. |br| raw:: html

   <br />

.. Macros for table-building
.. Start the module documentation


.. title:: de -- Enable and Disable CDP Data Engineering Services

de -- Enable and Disable CDP Data Engineering Services
======================================================

.. contents::
   :local:
   :depth: 1

Synopsis
--------

- Enable or Disable CDP Data Engineering Service



Requirements
------------
The below requirements are needed on the host that executes this module.

- cdpy


Parameters
----------




.. table::
   :widths: 30 20 50

   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **Parameter**                 | **Choices/Defaults**  | **Comments**                                                                                                                                        |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **name**                      |                       | The name of the CDE Service                                                                                                                         |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``str``                       |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | *Required*                    |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   |                               |                       | |br|                                                                                                                                                |
   |                               |                       |                                                                                                                                                     |
   |                               |                       | *Aliases: name*                                                                                                                                     |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **environment**               |                       | CDP environment where CDE service should be enabled                                                                                                 |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``str``                       |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | *Required*                    |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   |                               |                       | |br|                                                                                                                                                |
   |                               |                       |                                                                                                                                                     |
   |                               |                       | *Aliases: env*                                                                                                                                      |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **instance_type**             |                       | Instance type of the cluster for CDE Service                                                                                                        |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``str``                       |                       |                                                                                                                                                     |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **minimum_instances**         |                       | Minimum Instances for the CDE Service                                                                                                               |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``int``                       |                       |                                                                                                                                                     |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **maximum_instances**         |                       | Maximum Instances for the CDE Service                                                                                                               |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``int``                       |                       |                                                                                                                                                     |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **minimum_spot_instances**    |                       | Minimum Spot Instances for the CDE Service                                                                                                          |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``int``                       |                       |                                                                                                                                                     |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **maximum_spot_instances**    |                       | Maximum Spot Instances for the CDE Service                                                                                                          |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``int``                       |                       |                                                                                                                                                     |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **chart_value_overrides**     |                       | Chart overrides for enabling a service                                                                                                              |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``list``                      |                       |                                                                                                                                                     |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **enable_public_endpoint**    |                       | Creates a CDE endpoint (Load Balancer) in a publicly accessible subnet                                                                              |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``bool``                      |                       |                                                                                                                                                     |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **enable_workload_analytics** |                       | If set false, diagnostic information about job and query execution is sent to Cloudera Workload Manager                                             |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``bool``                      |                       |                                                                                                                                                     |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **initial_instances**         |                       | Initial Instances when the service is enabled                                                                                                       |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``int``                       |                       |                                                                                                                                                     |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **initial_spot_instances**    |                       | Initial spot Instances when the service is enabled                                                                                                  |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``int``                       |                       |                                                                                                                                                     |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **root_volume_size**          |                       | EBS volume size in GB                                                                                                                               |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``int``                       |                       |                                                                                                                                                     |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **skip_validation**           |                       | Skip Validation check.                                                                                                                              |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``bool``                      |                       |                                                                                                                                                     |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **tags**                      |                       | User defined labels that tag all provisioned cloud resources                                                                                        |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``dict``                      |                       |                                                                                                                                                     |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **use_ssd**                   |                       | Instance local storage (SSD) would be used for the workload filesystem (Example - spark local directory). Currently supported only for aws services |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``bool``                      |                       |                                                                                                                                                     |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **whitelist_ips**             |                       | List of CIDRs that would be allowed to access kubernetes master API server                                                                          |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``array``                     |                       |                                                                                                                                                     |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **force**                     |                       | Flag to force delete a service even if errors occur during deletion.                                                                                |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``bool``                      |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   |                               |                       | |br|                                                                                                                                                |
   |                               |                       |                                                                                                                                                     |
   |                               |                       | *Aliases: force_delete*                                                                                                                             |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **state**                     | **Choices:**          | The declarative state of the CDE service                                                                                                            |
   |                               |  - **present** |larr| |                                                                                                                                                     |
   | |br|                          |  - absent             |                                                                                                                                                     |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **wait**                      |                       | Flag to enable internal polling to wait for the DE Service to achieve the declared state.                                                           |
   |                               |                       | If set to FALSE, the module will return immediately.                                                                                                |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``bool``                      |                       |                                                                                                                                                     |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **delay**                     |                       | The internal polling interval (in seconds) while the module waits for the DE Service to achieve the declared state.                                 |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``int``                       |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   |                               |                       | |br|                                                                                                                                                |
   |                               |                       |                                                                                                                                                     |
   |                               |                       | *Aliases: polling_delay*                                                                                                                            |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
   | **timeout**                   |                       | The internal polling timeout (in seconds) while the module waits for the DE Service to achieve the declared state.                                  |
   |                               |                       |                                                                                                                                                     |
   | |br|                          |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   | ``int``                       |                       |                                                                                                                                                     |
   |                               |                       |                                                                                                                                                     |
   |                               |                       | |br|                                                                                                                                                |
   |                               |                       |                                                                                                                                                     |
   |                               |                       | *Aliases: polling_timeout*                                                                                                                          |
   +-------------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+






Examples
--------

.. code-block:: yaml+jinja

  
  # Create a DE service using defaults for optional parameters and wait for completion
  - cloudera.cloud.de:
      name: cde-cloudera-deploy-example
      env: cdp-environment-name
      instance_type: "m5.2xlarge"
      state: present
      wait: yes

  # Remove a DE service without waiting
  - cloudera.cloud.de:
      name: cde-cloudera-deploy-example+
      env: cdp-environment-name
      state: absent
      wait: no




Return Values
-------------

Common return values are documented here, the following are fields unique to this module.


.. table::
   :widths: 30 20 50

   +-------------------------------------+--------------+-------------------------------------------------------------------------------+
   | **Key**                             | **Returned** | **Description**                                                               |
   +-------------------------------------+--------------+-------------------------------------------------------------------------------+
   | **service**                         | always       | DE service description                                                        |
   |                                     |              |                                                                               |
   | |br|                                |              |                                                                               |
   |                                     |              |                                                                               |
   | ``complex``                         |              |                                                                               |
   +-+-----------------------------------+--------------+-------------------------------------------------------------------------------+
   | | **clusterId**                     | always       | Cluster Id of the CDE Service.                                                |
   | |                                   |              |                                                                               |
   | | |br|                              |              |                                                                               |
   | |                                   |              |                                                                               |
   | | ``str``                           |              |                                                                               |
   +-+-----------------------------------+--------------+-------------------------------------------------------------------------------+
   | | **creatorEmail**                  | always       | Email Address of the CDE creator.                                             |
   | |                                   |              |                                                                               |
   | | |br|                              |              |                                                                               |
   | |                                   |              |                                                                               |
   | | ``str``                           |              |                                                                               |
   +-+-----------------------------------+--------------+-------------------------------------------------------------------------------+
   | | **enablingTime**                  | always       | Timestamp of service enabling.                                                |
   | |                                   |              |                                                                               |
   | | |br|                              |              |                                                                               |
   | |                                   |              |                                                                               |
   | | ``str``                           |              |                                                                               |
   +-+-----------------------------------+--------------+-------------------------------------------------------------------------------+
   | | **environmentName**               | always       | CDP Environment Name.                                                         |
   | |                                   |              |                                                                               |
   | | |br|                              |              |                                                                               |
   | |                                   |              |                                                                               |
   | | ``str``                           |              |                                                                               |
   +-+-----------------------------------+--------------+-------------------------------------------------------------------------------+
   | | **name**                          | always       | Name of the CDE Service.                                                      |
   | |                                   |              |                                                                               |
   | | |br|                              |              |                                                                               |
   | |                                   |              |                                                                               |
   | | ``str``                           |              |                                                                               |
   +-+-----------------------------------+--------------+-------------------------------------------------------------------------------+
   | | **status**                        | always       | Status of the CDE Service.                                                    |
   | |                                   |              |                                                                               |
   | | |br|                              |              |                                                                               |
   | |                                   |              |                                                                               |
   | | ``str``                           |              |                                                                               |
   +-+-----------------------------------+--------------+-------------------------------------------------------------------------------+
   | | **chartValueOverrides**           | always       | Status of the CDE Service.                                                    |
   | |                                   |              |                                                                               |
   | | |br|                              |              |                                                                               |
   | |                                   |              |                                                                               |
   | | ``array``                         |              |                                                                               |
   +-+-+---------------------------------+--------------+-------------------------------------------------------------------------------+
   | | | **ChartValueOverridesResponse** | always       |                                                                               |
   | | |                                 |              |                                                                               |
   | | | |br|                            |              |                                                                               |
   | | |                                 |              |                                                                               |
   | | | ``list``                        |              |                                                                               |
   +-+-+-+-------------------------------+--------------+-------------------------------------------------------------------------------+
   | | | | **chartName**                 | always       | Name of the chart that has to be overridden.                                  |
   | | | |                               |              |                                                                               |
   | | | | |br|                          |              |                                                                               |
   | | | |                               |              |                                                                               |
   | | | | ``str``                       |              |                                                                               |
   +-+-+-+-------------------------------+--------------+-------------------------------------------------------------------------------+
   | | | | **overrides**                 | always       | Space separated key value-pairs for overriding chart values (colon separated) |
   | | | |                               |              |                                                                               |
   | | | | |br|                          |              |                                                                               |
   | | | |                               |              |                                                                               |
   | | | | ``str``                       |              |                                                                               |
   +-+-+-+-------------------------------+--------------+-------------------------------------------------------------------------------+
   | | **cloudPlatform**                 | always       | The cloud platform where the CDE service is enabled.                          |
   | |                                   |              |                                                                               |
   | | |br|                              |              |                                                                               |
   | |                                   |              |                                                                               |
   | | ``str``                           |              |                                                                               |
   +-+-----------------------------------+--------------+-------------------------------------------------------------------------------+
   | | **clusterFqdn**                   | always       | FQDN of the CDE service.                                                      |
   | |                                   |              |                                                                               |
   | | |br|                              |              |                                                                               |
   | |                                   |              |                                                                               |
   | | ``str``                           |              |                                                                               |
   +-+-----------------------------------+--------------+-------------------------------------------------------------------------------+
   | | **creatorCrn**                    | always       | CRN of the creator.                                                           |
   | |                                   |              |                                                                               |
   | | |br|                              |              |                                                                               |
   | |                                   |              |                                                                               |
   | | ``str``                           |              |                                                                               |
   +-+-----------------------------------+--------------+-------------------------------------------------------------------------------+
   | | **dataLakeAtlasUIEndpoint**       | always       | Endpoint of Data Lake Atlas.E                                                 |
   | |                                   |              |                                                                               |
   | | |br|                              |              |                                                                               |
   | |                                   |              |                                                                               |
   | | ``str``                           |              |                                                                               |
   +-+-----------------------------------+--------------+-------------------------------------------------------------------------------+
   | | **dataLakeFileSystems**           | always       | The Data lake file system.                                                    |
   | |                                   |              |                                                                               |
   | | |br|                              |              |                                                                               |
   | |                                   |              |                                                                               |
   | | ``str``                           |              |                                                                               |
   +-+-----------------------------------+--------------+-------------------------------------------------------------------------------+
   | | **environmentCrn**                | always       | CRN of the environment.                                                       |
   | |                                   |              |                                                                               |
   | | |br|                              |              |                                                                               |
   | |                                   |              |                                                                               |
   | | ``str``                           |              |                                                                               |
   +-+-----------------------------------+--------------+-------------------------------------------------------------------------------+
   | | **logLocation**                   | always       | Location for the log files of jobs.                                           |
   | |                                   |              |                                                                               |
   | | |br|                              |              |                                                                               |
   | |                                   |              |                                                                               |
   | | ``str``                           |              |                                                                               |
   +-+-----------------------------------+--------------+-------------------------------------------------------------------------------+
   | | **resources**                     | always       | Resources details of CDE Service.                                             |
   | |                                   |              |                                                                               |
   | | |br|                              |              |                                                                               |
   | |                                   |              |                                                                               |
   | | ``complex``                       |              |                                                                               |
   +-+-+---------------------------------+--------------+-------------------------------------------------------------------------------+
   | | | **ServiceResources**            | always       | Object to store resources for a CDE service.                                  |
   | | |                                 |              |                                                                               |
   | | | |br|                            |              |                                                                               |
   | | |                                 |              |                                                                               |
   | | | ``complex``                     |              |                                                                               |
   +-+-+-+-------------------------------+--------------+-------------------------------------------------------------------------------+
   | | | | **initial_instances**         | always       | Initial instances for the CDE service.                                        |
   | | | |                               |              |                                                                               |
   | | | | |br|                          |              |                                                                               |
   | | | |                               |              |                                                                               |
   | | | | ``str``                       |              |                                                                               |
   +-+-+-+-------------------------------+--------------+-------------------------------------------------------------------------------+
   | | | | **initial_spot_instances**    | always       | Initial Spot Instances for the CDE Service.                                   |
   | | | |                               |              |                                                                               |
   | | | | |br|                          |              |                                                                               |
   | | | |                               |              |                                                                               |
   | | | | ``str``                       |              |                                                                               |
   +-+-+-+-------------------------------+--------------+-------------------------------------------------------------------------------+
   | | | | **instance_type**             | always       | Instance type of the CDE service.                                             |
   | | | |                               |              |                                                                               |
   | | | | |br|                          |              |                                                                               |
   | | | |                               |              |                                                                               |
   | | | | ``str``                       |              |                                                                               |
   +-+-+-+-------------------------------+--------------+-------------------------------------------------------------------------------+
   | | | | **max_instances**             | always       | Maximum instances for the CDE service.                                        |
   | | | |                               |              |                                                                               |
   | | | | |br|                          |              |                                                                               |
   | | | |                               |              |                                                                               |
   | | | | ``str``                       |              |                                                                               |
   +-+-+-+-------------------------------+--------------+-------------------------------------------------------------------------------+
   | | | | **max_spot_instances**        | always       | Maximum Number of Spot instances.                                             |
   | | | |                               |              |                                                                               |
   | | | | |br|                          |              |                                                                               |
   | | | |                               |              |                                                                               |
   | | | | ``str``                       |              |                                                                               |
   +-+-+-+-------------------------------+--------------+-------------------------------------------------------------------------------+
   | | | | **min_instances**             | always       | Minimum Instances for the CDE service.                                        |
   | | | |                               |              |                                                                               |
   | | | | |br|                          |              |                                                                               |
   | | | |                               |              |                                                                               |
   | | | | ``str``                       |              |                                                                               |
   +-+-+-+-------------------------------+--------------+-------------------------------------------------------------------------------+
   | | | | **min_spot_instances**        | always       | Minimum number of spot instances for the CDE service.                         |
   | | | |                               |              |                                                                               |
   | | | | |br|                          |              |                                                                               |
   | | | |                               |              |                                                                               |
   | | | | ``str``                       |              |                                                                               |
   +-+-+-+-------------------------------+--------------+-------------------------------------------------------------------------------+
   | | | | **root_vol_size**             | always       | Root Volume Size.                                                             |
   | | | |                               |              |                                                                               |
   | | | | |br|                          |              |                                                                               |
   | | | |                               |              |                                                                               |
   | | | | ``str``                       |              |                                                                               |
   +-+-+-+-------------------------------+--------------+-------------------------------------------------------------------------------+
   | | **tenantId**                      | always       | CDP tenant ID.                                                                |
   | |                                   |              |                                                                               |
   | | |br|                              |              |                                                                               |
   | |                                   |              |                                                                               |
   | | ``str``                           |              |                                                                               |
   +-+-----------------------------------+--------------+-------------------------------------------------------------------------------+


Status
------




- This module is not guaranteed to have a backwards compatible interface. *[preview]*


- This module is maintained by community.



Authors
~~~~~~~

- Curtis Howard (@curtishoward)
- Alan Silva (@acsjumpi)

